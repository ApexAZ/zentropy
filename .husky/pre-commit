echo "🔍 Running pre-commit quality checks..."

# Run comprehensive quality check (format, lint, type-check, all tests)
echo "📋 Running complete quality pipeline..."
if ! npm run quality:pre-commit; then
    echo ""
    echo "❌ Code quality check failed!"
    echo "💡 Please fix the issues above before committing"
    echo "🔧 Common fixes:"
    echo "   npm run fix       # Auto-fix formatting and linting issues"
    echo "   npm run lint      # Auto-fix linting issues"
    echo "   npm run format    # Auto-format code"
    echo "   npm run type-check # Check TypeScript errors"
    echo ""
    exit 1
fi

# Re-stage any files that were modified by linting/formatting
echo "📝 Re-staging formatted files..."
git add .

echo "✅ Complete quality pipeline passed!"
echo "🎉 All pre-commit checks passed - ready to commit!"